<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo Game</title>
</head>
<body>
    <script>
    function loadClient(){
  var http = new XMLHttpRequest();
  var textArea = document.getElementById("text-area");
  var button = document.getElementById("button");
  var text = document.getElementById("text");
  http.open("POST","localhost:5000/api/login");
  http.send(textArea.textContent + " has joined");
  hide();
  text.textContent = "You are joining...";
  http.onreadystatechange = function() {
    if(this.readyState == 4 && this.status == 200){
      text.textContent = this.responseText;
      document.getElementById("text-box").style.display = "block";
      button.textContent = "Submit";
      button.style.display = "block";
      button.onclick = loadQuestion();
    } else if (this.status == 400){
      text.textContent = "This lobby is currently full."
    }
  };
}

function reset(prompt){
  document.getElementById("text").textContent = prompt;
  document.getElementById("button").style.visibility = "visible";
  document.getElementById("text-area").style.visibility = "visible";
  document.getElementById("text-area").textContent = "";
}

function hide(){
  var button = document.getElementById("button");
  var text = document.getElementById("text");
  var textArea = document.getElementById("text-area");
  textArea.style.display = "none";
  button.style.display = "none";
}

function loadQuestion(){
  var http = new XMLHttpRequest();
  var button = document.getElementById("button");
  var text = document.getElementById("text");
  var textArea = document.getElementById("text-area");
  http.open("POST", "localhost:5000");
  http.send(textArea.textContent);
  text.textContent = "You have submitted your answer! Please wait for other players to answer...";
  http.onload = function() {
    reset(this.responseText);
  };
}
</script>
    <p id = "text"></p>
    <textarea id = "text-area" rows="1" cols="50" placeholder="Enter Your Username"></textarea>
    <button style = "display:block" onclick = "loadClient()" id = "button">Join</button>
</body>
</html>